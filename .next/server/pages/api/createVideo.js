"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/createVideo";
exports.ids = ["pages/api/createVideo"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "(api)/./pages/api/createVideo.js":
/*!**********************************!*\
  !*** ./pages/api/createVideo.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// api/createVideo.js\n\nconst password = \"mongoFront\";\nconst url = `mongodb+srv://OS:${password}@cluster0.ohyel0g.mongodb.net/?retryWrites=true&w=majority`;\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().set(\"strictQuery\", false);\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(url);\nconst videoSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    user: String,\n    dateUploaded: Date,\n    postId: String,\n    cloudinaryLink: String\n});\nlet Video;\ntry {\n    Video = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Video\");\n} catch (error) {\n    Video = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Video\", videoSchema);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    switch(req.method){\n        case \"POST\":\n            {\n                const { user , dateUploaded , postId , cloudinaryLink  } = req.body;\n                const video = new Video({\n                    user,\n                    dateUploaded,\n                    postId,\n                    cloudinaryLink\n                });\n                try {\n                    await video.save();\n                    res.status(200).json({\n                        message: \"Video metadata saved successfully\"\n                    });\n                } catch (error) {\n                    console.error(\"Error creating video metadata: \", error);\n                    res.status(500).json({\n                        message: \"Error saving video metadata\"\n                    });\n                }\n            }\n        // case 'GET':{\n        //   const postId = req.query;\n        //   try{\n        //     const video = await Video.findOne(postId);\n        //     if (!video) {\n        //       res.status(200).json({ message: 'No video found' });\n        //     } else {\n        //       res.json(video);\n        //     }\n        //   } catch (error) {\n        //     console.error( error);\n        //   }\n        //   break;\n        // }\n        case \"GET\":\n            {\n                const postId = req.query;\n                try {\n                    const video = await Video.findOne(postId);\n                    if (!video) {\n                        res.status(200).json({\n                            message: \"No video found\"\n                        });\n                    } else {\n                        res.json(video);\n                    }\n                } catch (error) {\n                    console.error(error);\n                    res.status(500).json({\n                        message: \"An error occurred\"\n                    }); // send a response on error\n                }\n                break;\n            }\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY3JlYXRlVmlkZW8uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDK0I7QUFFL0IsTUFBTUMsV0FBVztBQUNqQixNQUFNQyxNQUNILG9CQUFtQkQsU0FBUywyREFBMkQ7QUFFMUZELG1EQUFZLENBQUMsZUFBZSxLQUFLO0FBQ2pDQSx1REFBZ0IsQ0FBQ0U7QUFFakIsTUFBTUcsY0FBYyxJQUFJTCx3REFBZSxDQUFDO0lBQ3RDTyxNQUFNQztJQUNOQyxjQUFjQztJQUNkQyxRQUFRSDtJQUNSSSxnQkFBZ0JKO0FBQ2xCO0FBRUEsSUFBSUs7QUFFSixJQUFJO0lBQ0ZBLFFBQVFiLHFEQUFjLENBQUM7QUFDekIsRUFBRSxPQUFPZSxPQUFPO0lBQ2RGLFFBQVFiLHFEQUFjLENBQUMsU0FBU0s7QUFDbEM7QUFFQSxpRUFBZSxPQUFPVyxLQUFLQyxNQUFRO0lBQ2pDLE9BQVFELElBQUlFLE1BQU07UUFDaEIsS0FBSztZQUFRO2dCQUNYLE1BQU0sRUFBRVgsS0FBQUEsRUFBTUUsYUFBQUEsRUFBY0UsT0FBQUEsRUFBUUMsZUFBQUEsRUFBZ0IsR0FBR0ksSUFBSUcsSUFBSTtnQkFFL0QsTUFBTUMsUUFBUSxJQUFJUCxNQUFNO29CQUN0Qk47b0JBQ0FFO29CQUNBRTtvQkFDQUM7Z0JBQ0Y7Z0JBRUEsSUFBSTtvQkFDRixNQUFNUSxNQUFNQyxJQUFJO29CQUNoQkosSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFBRUMsU0FBUztvQkFBb0M7Z0JBQ3RFLEVBQUUsT0FBT1QsT0FBTztvQkFDWlUsUUFBUVYsS0FBSyxDQUFDLG1DQUFtQ0E7b0JBQ2pERSxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO3dCQUFFQyxTQUFTO29CQUE4QjtnQkFDaEU7WUFDSjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSxLQUFLO1lBQU07Z0JBQ1QsTUFBTWIsU0FBU0ssSUFBSVUsS0FBSztnQkFDeEIsSUFBRztvQkFDRCxNQUFNTixRQUFRLE1BQU1QLE1BQU1jLE9BQU8sQ0FBQ2hCO29CQUNsQyxJQUFJLENBQUNTLE9BQU87d0JBQ1ZILElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7NEJBQUVDLFNBQVM7d0JBQWlCO29CQUNuRCxPQUFPO3dCQUNMUCxJQUFJTSxJQUFJLENBQUNIO29CQUNYO2dCQUNGLEVBQUUsT0FBT0wsT0FBTztvQkFDZFUsUUFBUVYsS0FBSyxDQUFFQTtvQkFDZkUsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFBRUMsU0FBUztvQkFBb0IsSUFBSztnQkFDM0Q7Z0JBQ0E7WUFDRjtJQUVGO0FBQ0YsR0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hlbGxvLW5leHQvLi9wYWdlcy9hcGkvY3JlYXRlVmlkZW8uanM/ZDllMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcGkvY3JlYXRlVmlkZW8uanNcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IHBhc3N3b3JkID0gJ21vbmdvRnJvbnQnO1xuY29uc3QgdXJsID1cbiAgYG1vbmdvZGIrc3J2Oi8vT1M6JHtwYXNzd29yZH1AY2x1c3RlcjAub2h5ZWwwZy5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5YDtcblxubW9uZ29vc2Uuc2V0KCdzdHJpY3RRdWVyeScsIGZhbHNlKTtcbm1vbmdvb3NlLmNvbm5lY3QodXJsKTtcblxuY29uc3QgdmlkZW9TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgdXNlcjogU3RyaW5nLFxuICBkYXRlVXBsb2FkZWQ6IERhdGUsXG4gIHBvc3RJZDogU3RyaW5nLFxuICBjbG91ZGluYXJ5TGluazogU3RyaW5nLFxufSk7XG5cbmxldCBWaWRlbztcblxudHJ5IHtcbiAgVmlkZW8gPSBtb25nb29zZS5tb2RlbCgnVmlkZW8nKTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIFZpZGVvID0gbW9uZ29vc2UubW9kZWwoJ1ZpZGVvJywgdmlkZW9TY2hlbWEpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgc3dpdGNoIChyZXEubWV0aG9kKSAge1xuICAgIGNhc2UgJ1BPU1QnOiB7XG4gICAgICBjb25zdCB7IHVzZXIsIGRhdGVVcGxvYWRlZCwgcG9zdElkLCBjbG91ZGluYXJ5TGluayB9ID0gcmVxLmJvZHk7XG5cbiAgICAgIGNvbnN0IHZpZGVvID0gbmV3IFZpZGVvKHtcbiAgICAgICAgdXNlcixcbiAgICAgICAgZGF0ZVVwbG9hZGVkLFxuICAgICAgICBwb3N0SWQsXG4gICAgICAgIGNsb3VkaW5hcnlMaW5rLFxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHZpZGVvLnNhdmUoKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnVmlkZW8gbWV0YWRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIHZpZGVvIG1ldGFkYXRhOiBcIiwgZXJyb3IpO1xuICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHNhdmluZyB2aWRlbyBtZXRhZGF0YScgfSk7XG4gICAgICAgIH1cbiAgICB9IFxuICAgIC8vIGNhc2UgJ0dFVCc6e1xuICAgIC8vICAgY29uc3QgcG9zdElkID0gcmVxLnF1ZXJ5O1xuICAgIC8vICAgdHJ5e1xuICAgIC8vICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IFZpZGVvLmZpbmRPbmUocG9zdElkKTtcbiAgICAvLyAgICAgaWYgKCF2aWRlbykge1xuICAgIC8vICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIHZpZGVvIGZvdW5kJyB9KTtcbiAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICByZXMuanNvbih2aWRlbyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoIGVycm9yKTtcbiAgICAvLyAgIH1cbiAgICAvLyAgIGJyZWFrO1xuICAgIC8vIH1cbiAgICBjYXNlICdHRVQnOntcbiAgICAgIGNvbnN0IHBvc3RJZCA9IHJlcS5xdWVyeTtcbiAgICAgIHRyeXtcbiAgICAgICAgY29uc3QgdmlkZW8gPSBhd2FpdCBWaWRlby5maW5kT25lKHBvc3RJZCk7XG4gICAgICAgIGlmICghdmlkZW8pIHtcbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyB2aWRlbyBmb3VuZCcgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLmpzb24odmlkZW8pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0FuIGVycm9yIG9jY3VycmVkJyB9KTsgIC8vIHNlbmQgYSByZXNwb25zZSBvbiBlcnJvclxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIFxuICB9XG59OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInBhc3N3b3JkIiwidXJsIiwic2V0IiwiY29ubmVjdCIsInZpZGVvU2NoZW1hIiwiU2NoZW1hIiwidXNlciIsIlN0cmluZyIsImRhdGVVcGxvYWRlZCIsIkRhdGUiLCJwb3N0SWQiLCJjbG91ZGluYXJ5TGluayIsIlZpZGVvIiwibW9kZWwiLCJlcnJvciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImJvZHkiLCJ2aWRlbyIsInNhdmUiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImNvbnNvbGUiLCJxdWVyeSIsImZpbmRPbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/createVideo.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/createVideo.js"));
module.exports = __webpack_exports__;

})();